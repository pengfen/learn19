日志收集系统设计 
日志客户端开发

日志收集项目
每个系统都有日志 当系统出现问题时 需要通过日志解决问题
当系统机器比较少时 登录到服务器上查看即可满足
当系统机器规模巨大 登录到机器上查看几乎不现实

解决方案
把机器上的日志实时收集 统一的存储到中心系统
然后再对这些日志建立索引 通过搜索即可找到对应日志
通过提供界面友好的web界面 通过web即可完成日志搜索

面临的问题
实时日志量非常大 每天几十亿条
日志准实时收集 延迟控制在分钟级别
能够水平可扩展

elk方案问题
运维成本高 每增加一个日志收集 都需要手动修改配置
监控缺失 无法准确获取logstash的状态
无法做定制化开发以及维护

Log Agent ---> Kafka ---> (Hadoop ES Storm)
Log Agent 日志收集客户端 用来收集服务器上的日志
Kafka 高吞吐量的分布式队列 linkin开发 apache项级开源项目
ES elasticsearch 开源的搜索引擎 提供基于http restful的web接口
Hadoop 分布式计算框架 能够对大量数据进行分布式处理的平台

kafka 应用场景
1. 异步处理 把非关键流程异步化 提高系统的响应时间和键壮性
2. 通过消息队列 应用解耦
3. 流量削锋

zookeeper 应用场景
1. 服务注册&服务发现
2. 配置中心
3. 分布式锁 (zookeeper是强一到的  多个客户端同时在zookeeper上创建相同znode 只有一个创建成功)

kafka.html
kafka.go

tailf.go

ElasticSearch 介绍与使用
kibana 介绍与使用

下载ES
修改config/elasticSearch.ymal 配置
network.host 本地ip
node.name:node_1

启动es ./bin/elasticSearch.bat
es.go


kibana安装
下载Kibana
解压缩
启动Kibana ./bin/kibana.bat
访问 localhost:5601

nginx安装
下载nginx
解压缩
启动nginx ./nginx
访问localhost

mysql事务
原子性 一致性 隔离性 持久性
import ("github.com/jmoiron/sqlx")
Db.Begin() 开始事务
Db.Submit() 提交事务
Db.Rollback() 回滚事务
